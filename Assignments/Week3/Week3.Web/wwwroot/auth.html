<html>

<head>
    <meta charset="UTF-8">
    <title>Login/Register</title>
    <link rel="shortcut icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="css/genel.css">
	<style>
		.toast{position:fixed;right:16px;bottom:16px;background:#10b981;color:#000;padding:10px 14px;border-radius:10px;font-weight:700;box-shadow:0 6px 20px rgba(0,0,0,.25);z-index:9999;opacity:0;transform:translateY(8px);transition:opacity .2s ease,transform .2s ease}
		.toast.show{opacity:1;transform:translateY(0)}
		.toast.error{background:#fca5a5}
	</style>
</head>

<body class="body">
    <div id="login-container">

        <div id="auth-grid">

        <div id="login-card">
            <h1 id="auth-text">Login</h1>
            <form id="login-form" action="#">
                <div class="field">
                    <label for="login-email">E-posta</label>
                    <input type="email" name="email" placeholder="ornek@example.com" required autocomplete="email">
                </div>

                <div class="field">
                    <label for="login-password">Şifre</label>
                    <input name="password" type="password" placeholder="*******" required autocomplete="current-password">
                </div>

                <div class="auth-button">
                    <button type="submit" class="btn">Giriş yap</button>
                </div>

            </form>


        </div>

        <div id="register-card">
            <h2 id="auth-text">Register</h2>
            <form  id="register-form" action="#">
                <div class="field">
                    <label for="register-name">Ad-Soyad</label>
                    <input name="name" type="text" placeholder="Ad-Soyad" required autocomplete="name">
                </div>

                <div class="field">
                    <label for="register-email">E-posta</label>
                    <input id="register-email" name="email" type="email" placeholder="ornek@example.com" required autocomplete="email">
                </div>

                <div class="field">
                    <label for="register-password">Şifre</label>
                    <input name="password" type="password" placeholder="*******" required autocomplete="new-password">
                </div>

                <div class="auth-button">
                    <button type="submit" class="btn">Kayıt Ol</button>
                </div>





            </form>


        </div>

        </div>    






    </div>



    
</body>

<script>
	function showToast(message, isError){
		const t = document.createElement('div');
		t.className = 'toast' + (isError ? ' error' : '');
		t.textContent = message;
		document.body.appendChild(t);
		requestAnimationFrame(()=>t.classList.add('show'));
		setTimeout(()=>{
			t.classList.remove('show');
			setTimeout(()=>t.remove(), 180);
		}, 2200);
	}

	document.getElementById('register-form').addEventListener('submit', async (e)=>{
		e.preventDefault();
		const form = e.currentTarget;
		const payload = {
			name: form.elements['name']?.value?.trim() || '',
			email: form.elements['email']?.value?.trim() || '',
			password: form.elements['password']?.value || ''
		};
		try{
			const res = await fetch('/api/auth/register',{
				method:'POST',
				headers:{'Content-Type':'application/json'},
				body: JSON.stringify(payload)
			});
			if(res.ok){
				showToast('Başarıyla kayıt oldunuz');
				form.reset();
			}else{
				let msg = 'Kayıt başarısız';
				try{ const j = await res.json(); if(j?.message) msg = j.message; }catch{}
				showToast(msg, true);
			}
		}catch(err){
			showToast('Bağlantı hatası', true);
		}
	});

	document.getElementById('login-form').addEventListener('submit', async (e)=>{
		e.preventDefault();
		const form = e.currentTarget;
		const payload = {
			email: form.elements['email']?.value?.trim() || '',
			password: form.elements['password']?.value || ''
		};
		try{
			const res = await fetch('/api/auth/login',{
				method:'POST',
				headers:{'Content-Type':'application/json'},
				body: JSON.stringify(payload)
			});
			if(res.ok){
				showToast('Giriş başarılı');
			}else{
				showToast('E-posta veya şifre hatalı', true);
			}
		}catch(err){
			showToast('Bağlantı hatası', true);
		}
	});

</script>







</html>